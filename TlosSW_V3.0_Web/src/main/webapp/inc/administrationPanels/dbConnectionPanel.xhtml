<?xml version="1.0" encoding="UTF-8"?>

<ui:composition template="/templates/common/commonLayout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:param name="title"
		value="Tlos SW Workload Automation Software v1.0 - DB Management Page" />

	<ui:define name="center">

		<ui:param name="title1" value="Main Menu" />
		<ui:param name="title2" value="Administration" />
		<ui:param name="title3" value="DB Connections" />
		<ui:param name="title4" value="" />

		<ui:param name="title1link" value="/" />
		<ui:param name="title2link" value="dbConnectionPanel.xhtml" />
		<ui:param name="title3link"
			value="/inc/administrationPanels/dbConnectionPanel.xhtml" />
		<ui:param name="title4link"
			value="Tlos SW Workload Automation Software v1.0 - DB Management Page" />
		<h:form>
			<p:breadCrumb>
				<p:menuitem value="#{title1}" url="#{title1link}" />
				<p:menuitem value="#{title2}" url="#{title2link}" />
				<p:menuitem value="#{title3}" url="#{title3link}" />
			</p:breadCrumb>
		</h:form>

		<br></br>

		<h:form id="newDBConnection">

			<p:fieldset id="fieldSet4DB"
				legend="#{msgs['tlos.management.pannel.dbDefinition.definition']}"
				widgetVar="regWidget" style="width: 850px;">

				<p:growl id="messages" showDetail="true" autoUpdate="true" />

				<p:panelGrid styleClass="companyHeaderGrid" columns="4" border="0">

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.connectionName']}" />
					<p:inputText id="connectionName"
						value="#{dbConnectionPanelMBean.dbProperties.connectionName}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.connectionName']}"
						validatorMessage="#{msgs['tlos.validation.db.connectionName.min']}">
						<f:validateLength minimum="4"></f:validateLength>
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.dbType']}" />
					<p:selectOneMenu id="dbType" required="true"
						style="text-align: center; width: 100pt"
						requiredMessage="#{msgs['tlos.validation.db.dbType']}"
						value="#{dbConnectionPanelMBean.dbType}" partialSubmit="true">
						<f:selectItem itemLabel="#{msgs['tlos.combo.select']}"
							itemValue="" />
						<f:selectItems value="#{dbConnectionPanelMBean.dbTypeList}" />
					</p:selectOneMenu>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.dbName']}" />
					<p:inputText id="dbName"
						value="#{dbConnectionPanelMBean.dbProperties.dbName}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.dbName']}"
						validatorMessage="#{msgs['tlos.validation.db.dbName.regex']}">
						<f:validateRegex pattern="[a-zA-Z0-9_#$]{1,8}"></f:validateRegex>
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbDefinition.dbUrl']}" />
					<p:inputText id="dbUrl"
						value="#{dbConnectionPanelMBean.dbProperties.dbUrl}"
						style="width:200pt" required="true"
						requiredMessage="#{msgs['tlos.validation.db.dbUrl']}"
						validatorMessage="#{msgs['tlos.validation.db.dbUrl.min']}">
						<f:validateLength minimum="4"></f:validateLength>
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.dbVersion']}" />
					<p:inputText id="dbVersion"
						value="#{dbConnectionPanelMBean.dbProperties.dbVersion}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.dbVersion']}"
						validatorMessage="#{msgs['tlos.validation.db.dbVersion.regex']}">
						<f:validateRegex pattern="^(?:(\d+[a-zA-Z])\.?)?(?:(\d+)\.)?(\*|\d+)?$" />
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.driverName']}" />
					<p:inputText id="driverName"
						value="#{dbConnectionPanelMBean.dbProperties.driverName}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.driverName']}"
						validatorMessage="#{msgs['tlos.validation.db.driverName.min']}">
						<f:validateLength minimum="4"></f:validateLength>
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.hostName']}" />
					<p:inputText id="hostName"
						value="#{dbConnectionPanelMBean.dbProperties.hostName}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.hostName']}"
						validatorMessage="#{msgs['tlos.validation.db.hostName.min']}">
						<f:validateLength minimum="4"></f:validateLength>
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.ipAddress']}" />
					<p:inputText id="ipAddress"
						value="#{dbConnectionPanelMBean.dbProperties.ipAddress}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.ipAddress']}"
						validatorMessage="#{msgs['tlos.validation.db.ipAddress.regex']}">
						<f:validateRegex
							pattern="[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}" />
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.ftpPortNumber']}" />
					<p:inputText id="ftpPortNumber"
						value="#{dbConnectionPanelMBean.portNumber}" required="true"
						requiredMessage="#{msgs['tlos.validation.db.port']}"
						validatorMessage="#{msgs['tlos.validation.db.port.regex']}">
						<f:validateRegex pattern="[1-9][0-9]{3}" />
					</p:inputText>

					<h:outputText
						value="#{msgs['tlos.management.pannel.dbAccess.jdbcClassName']}" />
					<p:inputText id="jdbcClassName"
						value="#{dbConnectionPanelMBean.dbProperties.jdbcClassName}"
						required="true"
						requiredMessage="#{msgs['tlos.validation.db.jdbcClassName']}"
						validatorMessage="#{msgs['tlos.validation.db.jdbcClassName.min']}">
						<f:validateLength minimum="4"></f:validateLength>
					</p:inputText>
				</p:panelGrid>

				<p:panel id="useSqlClientAppPanel">
					<p:panelGrid id="useSqlClientAppPanelGrid" columns="4">
						<h:outputText
							value="#{msgs['tlos.management.pannel.dbDefinition.sqlClientAppUse']}" />
						<p:selectBooleanCheckbox id="checkboxId"
							value="#{dbConnectionPanelMBean.useSqlClientApp}">
							<p:ajax event="change" update="sqlClientAppPG" />
						</p:selectBooleanCheckbox>
					</p:panelGrid>

					<p:panelGrid id="sqlClientAppPG" columns="4">

						<h:outputText rendered="#{dbConnectionPanelMBean.useSqlClientApp}"
							value="#{msgs['tlos.management.pannel.dbDefinition.sqlClientAppName']}" />
						<p:selectOneMenu id="appName"
							rendered="#{dbConnectionPanelMBean.useSqlClientApp}"
							style="text-align: center; width:100pt"
							requiredMessage="#{msgs['tlos.validation.db.sqlClientAppName']}"
							value="#{dbConnectionPanelMBean.sqlClientAppName}"
							partialSubmit="true">
							<f:selectItem itemLabel="#{msgs['tlos.combo.select']}"
								itemValue="" />
							<f:selectItems
								value="#{dbConnectionPanelMBean.sqlClientAppNameList}" />
						</p:selectOneMenu>

						<h:outputText rendered="#{dbConnectionPanelMBean.useSqlClientApp}"
							value="#{msgs['tlos.management.pannel.dbDefinition.sqlClientAppPath']}" />
						<p:inputText id="appPath"
							rendered="#{dbConnectionPanelMBean.useSqlClientApp}"
							value="#{dbConnectionPanelMBean.sqlClientAppPath}"
							style="width:200pt"
							requiredMessage="#{msgs['tlos.validation.db.sqlClientAppPath']}"
							validatorMessage="#{msgs['tlos.validation.db.sqlClientAppPath.regex']}">
							<f:validateRegex
								pattern="([abcdefgABCDEFG]:[\\/])?([a-zA-Z/\\\.0-9_ \-])*" />
						</p:inputText>


					</p:panelGrid>
					<h:inputHidden value="#{dbConnectionPanelMBean.dbProperties.ID}"
						id="dbID" />

				</p:panel>

				<div class="tablectrl">
					<p:panel>
						<p:commandButton id="dbInsertButton"
							value=" #{msgs['tlos.button.save']} "
							rendered="#{dbConnectionPanelMBean.insertButton and security.DBAccessSave}"
							actionListener="#{dbConnectionPanelMBean.insertDBConnectionAction}">
							<f:param name="iCheck" value="insert" />
							<f:param name="selectCheckBox" value="true" />
						</p:commandButton>

						<p:commandButton id="dbUpdateButton"
							value="#{msgs['tlos.button.update']}"
							rendered="#{not dbConnectionPanelMBean.insertButton and security.DBAccessUpdate}"
							actionListener="#{dbConnectionPanelMBean.updateDBConnectionAction}">
							<f:param name="selectCheckBox" value="true" />
						</p:commandButton>
						<p:commandButton value="#{msgs['tlos.button.back']}" ajax="false"
							immediate="true" rendered="#{security.DBAccessBack}"
							action="dbConnectionSearchPanel.xhtml">
						</p:commandButton>
					</p:panel>
				</div>

			</p:fieldset>

		</h:form>

	</ui:define>
</ui:composition>