<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="liveForm">
		
		<p:growl id="messages" showDetail="true" sticky="false" />

		<p:fieldset id="tlosAgent" legend="#{msgs['tlos.live.panel.tlosagent.header']} - #{tlosAgentMBean.tlosAgentInfoTypeClient.agentName}" style="width: 96%;">

			<p:panel rendered="#{tlosAgentMBean.tlosAgentInfoTypeClient.agentType ne 'server'}" >

				<p:commandButton id="forcedDeactivateButton" update="liveForm"
					value="#{msgs['tlos.live.panel.tlosagent.forcedDeactivate']}" 
					rendered="#{tlosAgentMBean.tlosAgentInfoTypeClient.forcedDeactivate and security.ForcedDeactivateTAgent}"
					actionListener="#{tlosAgentMBean.forcedDeactivateAgentAction}" 
					onclick="if(!confirm('#{msgs['tlos.confirm.live.tlosagent.forcedDeactivate']}')) return false;" />

				<p:commandButton id="normalDeactivateButton" update="liveForm"
					value="#{msgs['tlos.live.panel.tlosagent.normalDeactivate']}"
					rendered="#{tlosAgentMBean.tlosAgentInfoTypeClient.normalDeactivate and security.NormalDeactivateTAgent}"
					actionListener="#{tlosAgentMBean.normalDeactivateAgentAction}"
					onclick="if(!confirm('#{msgs['tlos.confirm.live.tlosagent.normalDeactivate']}')) return false;" />

				<p:commandButton id="activateButton" update="liveForm"
					value="#{msgs['tlos.live.panel.tlosagent.activate']}"
					rendered="#{tlosAgentMBean.tlosAgentInfoTypeClient.activate and security.ActivateTAgent}"
					actionListener="#{tlosAgentMBean.activateAgentAction}"
					onclick="if(!confirm('#{msgs['tlos.confirm.live.tlosagent.activate']}')) return false;" />

			</p:panel>
		
			<br />

			<ui:include src="/inc/livePanels/commonJobListTable.xhtml">
				<ui:param name="backingBean" value="#{tlosAgentMBean}" />
			</ui:include>
		
		</p:fieldset>
	</h:form>

</ui:composition>